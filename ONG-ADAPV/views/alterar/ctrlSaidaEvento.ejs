<script src="/js/alterar/ctrlSaidaEvento.js"></script>
<div class="container">
    <div class="container-fluid">

        <h1 class="h3 mb-4 text-gray-800">Alterar Controle de saída de evento</h1>
        <% if (typeof msg != "undefined") { %>
            <span><%= msg %></span>
        <% } %>

        <input id="id" hidden value="<%= ctrlEvento.ctrlEven_id %>">
        <input id="createdAt" hidden value="<%= ctrlEvento.createdAt %>">

        <div class="col-md-6">
            <label for="even_id" class="form-label">Evento<span class="text-danger">*</span></label>
            <select name="even_id" class="form-control" id="even_id">
                <option value="" selected>Selecione...</option>
                <% listaEvento.forEach(function(evento) { %>
                    <% var isEvento = listaCtrlEven.find(ctrlEven => ctrlEven.even_id === evento.even_id) %>
                    <option value="<%= evento.even_id %>" <%= isEvento ? "selected" : "" %> >NOME: <%= evento.even_nome %> - DATA DE INÍCIO: <%= evento.even_dataInicio.toLocaleDateString('pt-BR')%></option>
                <% }); %>
            </select>
        </div>

        <div class="col-md-6">
            <label for="ctrlEven_desc" class="form-label">Descrição sobre o controle<span class="text-danger">*</span></label>
            <input value="<%= ctrlEvento.ctrlEven_desc %>" type="text" name="ctrlEven_desc" class="form-control" id="ctrlEven_desc" placeholder="Digite a descrição do evento">
        </div>

        <div class="col-md-6">
            <label for="ctrlEven_estado" class="form-label">Registro de saída ou entrada?<span class="text-danger">*</span></label>
            <select name="ctrlEven_estado" id="ctrlEven_estado" class="form-control">
                <option value="" <%= ctrlEvento.ctrlEven_estado === '' ? "selected" : "disabled" %>>Selecione...</option>
                <option value="Saida" <%= ctrlEvento.ctrlEven_estado === 'Saida' ? "selected" : "disabled" %>>Saída</option>
                <option value="Entrada" <%= ctrlEvento.ctrlEven_estado === 'Entrada' ? "selected" : "disabled" %> >Entrada</option>
            </select>
        </div>

        <div class="col-md-6">
            <label for="prod_id" class="form-label">Produto Entrada/Saída<span class="text-danger">*</span></label>
            <select name="prod_id" id="prod_id" class="form-control">
                <option value="" selected>Selecione...</option>
                <% listaProduto.forEach(function(produto) { %>
                    <% var isProduto = listaCtrlEven.find(ctrlEven => ctrlEven.prod_id === produto.prod_id) %>
                    <option value="<%= produto.prod_id %>" <%= isProduto ? "selected" : "" %> >NOME: <%= produto.prod_nome %> - TIPO: <%= produto.prod_tipo%></option>
                <% }); %>
            </select>
        </div>

        <div class="col-md-6">
            <label for="prod_qnt" class="form-label">Quantidade de produtos<span class="text-danger">*</span></label>
            <input value="<%= ctrlEvento.prod_qnt %>" type="number" name="prod_qnt" class="form-control" id="prod_qnt" placeholder="Digite a quantidade de saída">
        </div>

        <div class="col-md-6">
            <label for="patrim_valor" class="form-label">Valor em dinheiro<span class="text-danger">*</span></label>
            <input value="<%= ctrlEvento.patrim_valor %>" type="text" name="patrim_valor" class="form-control" id="patrim_valor" placeholder="Digite o valor em dinheiro">
        </div>

        <div class="col-md-6">
            <label for="ani_id" class="form-label">Nome do animal<span class="text-danger">*</span></label>
            <select name="ani_id" id="ani_id" class="form-control">
                <option value="" selected>Selecione...</option>
                <% listaAnimal.forEach(function(animal) { %>
                    <% var isAnimal = listaCtrlEven.find(ctrlEven => ctrlEven.ani_id === animal.ani_id) %>
                    <option value="<%= animal.ani_id %>" <%= isAnimal ? "selected" : "" %> >NOME: <%= animal.ani_nome %> - RAÇA: <%= animal.ani_raca%></option>
                <% }); %>
            </select>
        </div>

        <br>
        <br>

        <div class="col-12">
            <button type="button" class="btn btn-success px-4 py-3" id="btnAlterar">Salvar</button>
            <button type="button" class="btn btn-secondary px-3 py-3" id="cancelar">Cancelar</button>
        </div>

    </div>
</div>